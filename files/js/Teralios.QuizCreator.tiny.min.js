define("Teralios/QuizCreator/Result",["Ajax","Language","StringUtil"],function(t,e,i){"use strict";return{init:function(t,e,i,n,s){this._result=t,this._score=e,this._timeTotal=i,this._quizData=n,this._gameContainer=s},showResult:function(){"competition"===this._quizData.type&&1===this._quizData.isActive?this._loadResult():this._renderResultOffline()},_loadResult:function(){t.api(this,{objectIDs:[this._quizData.quizID],parameters:{score:this._score,result:this._result,timeTotal:this._timeTotal}})},_renderResultLive:function(t){this._renderBase(),this._renderScore(t)},_renderResultOffline:function(){this._renderBase()},_buildBaseContainer:function(){this._gameContainer.innerHTML='<div class="result"></div>',this._resultContainer=elBySel(".result",this._gameContainer)},_renderBase:function(){this._buildBaseContainer(),this._renderGoal()},_renderGoal:function(){var t=this._quizData.goalList,n="",s=elCreate("div");if(s.classList.add("goal"),t.length>0){for(var a=!1,o=0;o<t.length;o++)Number(t[o].points)<=Number(this._score)&&(a=t[o]);!1!==a&&(n='<span class="icon icon96 '+a.icon+'"></span>',n+='<h3 class="name">'+i.escapeHTML(a.title)+"</h3>",""!==a.description&&(n+='<p class="small">'+i.escapeHTML(a.description)+"</p>"))}else n='<h3 class="name">'+e.get("wcf.quizCreator.game.goal.none")+"</h3>",n+='<p class="small">'+e.get("wcf.quizCreator.game.goal.none.detail")+"</p>";s.innerHTML=n,this._resultContainer.appendChild(s)},_renderScore:function(t){var n='<p class="player">'+this._score+" "+e.get("wcf.quizCreator.stats.score")+"</p>";t.players>0&&(n+='<div class="others">',n+="<p>âŒ€ "+i.escapeHTML(t.averageScore)+" "+e.get("wcf.quizCreator.stats.score")+"</p>"),void 0!==t.betterAs&&t.betterAs>0?n+=e.get("wcf.quizCreator.game.result.betterAs",{percent:i.escapeHTML(t.betterAs)}):n+="<p>"+e.get("wcf.quizCreator.game.result.asGood")+"</p>",n+="</div>";var s=elCreate("div");s.classList.add("score"),s.innerHTML=n,this._resultContainer.appendChild(s)},_ajaxSetup:function(){return{data:{actionName:"finishMatch",className:"wcf\\data\\quiz\\QuizAction"}}},_ajaxSuccess:function(t){this._renderResultLive(t.returnValues)},_ajaxFailure:function(){this._renderResultOffline()}}}),define("Teralios/QuizCreator/Game",["StringUtil","Language","Teralios/QuizCreator/Result"],function(t,e,i){"use strict";function n(t,e){this.init(t,e)}var s=["quizID","type","questions","questionList","goalList"],a=["A","B","C","D"],o=[10,5,1],r=[5,15,0],u=window.WCF_CLICK_EVENT;return n.prototype={init:function(t,e){this._gameContainer=e,this._data=t,this._checkData()&&(this._gameCanStart=!0)},buildGame:function(){!0===this._gameCanStart&&this._createBaseHTML()},startGame:function(){elRemove(this._buttonStart),this._buildGameHTML(),this._questionIndex=0,this._score=0,this._gameResult=[],this._timeTotal=0,this._showQuestion(!0)},answer:function(t){this._toggleButtons(!1),this._stopClock();var i=elData(t.currentTarget,"value");i===this._currentQuestion.answer?(t.currentTarget.classList.add("correct"),this._score+=this._questionScoreValue,this._updateScoreContainer()):t.currentTarget.classList.add("wrong"),this._gameResult[this._questionIndex]={answer:i,time:this._time},this._timeTotal+=this._time,this._questionIndex+1>=this._data.questions&&(this._buttonNext.textContent=e.get("wcf.quizCreator.game.finish")),this._buttonNext.style.visibility="visible",this._updateClockContainer(!1)},next:function(){this._buttonNext.style.visibility="hidden",this._questionIndex++,this._questionIndex>=this._data.questions?this._finishGame():this._showQuestion(!1)},_checkData:function(){for(var t=!1,i=s.length,n=0;n<i;n++)if(!1===this._data.hasOwnProperty(s[n])){t=!0;break}return 0===this._data.questionList.length&&(t=!0),!0===t&&this._printError(e.get("wcf.quizCreator.game.data.missing")),!t},_createBaseHTML:function(){this._headerContainer=elCreate("div"),this._contentContainer=elCreate("div"),this._footerContainer=elCreate("div"),this._headerContainer.className="gameHeader",this._contentContainer.className="gameContent",this._footerContainer.className="gameFooter",this._gameContainer.innerHTML="",this._gameContainer.appendChild(this._headerContainer),this._gameContainer.appendChild(this._contentContainer),this._gameContainer.appendChild(this._footerContainer),this._buttonStart=elCreate("button"),this._buttonStart.textContent=e.get("wcf.quizCreator.game.start"),this._buttonStart.addEventListener(u,this.startGame.bind(this)),this._contentContainer.appendChild(this._buttonStart)},_buildGameHTML:function(){var t="<b>"+e.get("wcf.quizCreator.stats.questions")+"</b> ";t+='<span class="currentQuestion"> '+this._questionIndex+"</span> / "+this._data.questions;var i=elCreate("div");i.className="questionCounter",i.innerHTML=t,this._questionCounterContainer=elBySel(".currentQuestion",i),this._headerContainer.appendChild(i);var n=elCreate("div");n.className="clock",n.innerHTML="<b>"+e.get("wcf.quizCreator.stats.time")+':</b> <span class="seconds"></span> ',this._timeContainer=elBySel(".seconds",n),this._headerContainer.appendChild(n);var s=elCreate("div");s.className="currentQuestionValue",s.innerHTML='+ <span class="questionValue"></span> <b>'+e.get("wcf.quizCreator.stats.points")+"</b>",this._questionValueContainer=elBySel(".questionValue",s),this._headerContainer.appendChild(s),this._footerContainer.innerHTML='<p><span class="score"></span> '+e.get("wcf.quizCreator.stats.score")+"</p>",this._scoreContainer=elBySel(".score",this._footerContainer),this._questionText=elCreate("p"),this._questionText.className="question",elHide(this._questionText),this._contentContainer.appendChild(this._questionText),this._answerList=this._buildQuestionField(),elHide(this._answerList),this._contentContainer.appendChild(this._answerList),this._buttonNext=elCreate("button"),this._buttonNext.textContent=e.get("wcf.quizCreator.game.next"),this._buttonNext.addEventListener(u,this.next.bind(this)),this._buttonNext.style.visibility="hidden",this._contentContainer.appendChild(this._buttonNext)},_buildQuestionField:function(){var t=elCreate("ul");t.className="answerList",shuffle(a),this._buttons=[];for(var e=0;e<4;e++){var i=a[e],n=elCreate("button");n.className="answer",elData(n,"value",i),n.addEventListener(u,this.answer.bind(this));var s=elCreate("li");s.appendChild(n),t.appendChild(s),this._buttons[e]=n}return t},_toggleButtons:function(t){for(var e=0;e<4;e++)!0===t?(this._buttons[e].removeAttribute("disabled"),this._buttons[e].classList.remove("wrong","correct")):this._buttons[e].setAttribute("disabled","disabled")},_showQuestion:function(e){!0===e&&(elShow(this._questionText),elShow(this._answerList),this._contentContainer.classList.add("borderTop"),this._footerContainer.classList.add("borderTop"),this._updateScoreContainer()),this._currentQuestion=this._data.questionList[this._questionIndex],this._questionText.textContent=t.escapeHTML(this._currentQuestion.question);for(var i=0;i<4;i++){var n="option"+elData(this._buttons[i],"value");this._buttons[i].textContent=t.escapeHTML(this._currentQuestion[n])}this._toggleButtons(!0),this._questionCounterContainer.textContent=String(this._questionIndex+1),this._startClock()},_startClock:function(){if("competition"===this._data.type){for(var t=1;t<=3;t++)this._timeContainer.classList.remove("status"+t);this._clockStatus=0,this._timeContainer.classList.add("status"+this._clockStatus),this._questionScoreValue=o[this._clockStatus]}else this._questionScoreValue=1;this._time=0,this._updateClockContainer(),this._updatePointContainer(),this._clockID=setInterval(this.clockTick.bind(this),1e3)},_stopClock:function(){clearInterval(this._clockID)},clockTick:function(){if(this._time++,"competition"===this._data.type){var t=r[this._clockStatus];t>0&&this._time>t&&(this._timeContainer.classList.remove("status"+this._clockStatus),this._clockStatus++,this._timeContainer.classList.add("status"+this._clockStatus),this._questionScoreValue=o[this._clockStatus],this._updatePointContainer())}this._updateClockContainer(!0)},_updateClockContainer:function(t){var e=String(this._time%60),i=Math.floor(this._time/60),n=":";!0===t&&(n=this._time%2==1?" ":":"),e.length<2&&(e="0"+e),this._timeContainer.textContent=i+n+e},_updatePointContainer:function(){this._questionValueContainer.textContent=String(this._questionScoreValue)},_updateScoreContainer:function(){this._scoreContainer.textContent=String(this._score)},_finishGame:function(){i.init(this._gameResult,this._score,this._timeTotal,this._data,this._gameContainer),i.showResult()},_printError:function(t){this._gameContainer.innerHTML='<div class="gameContent"><p class="error">'+t+"</p></div>"}},n}),define("Teralios/QuizCreator/Quiz",["Ajax","StringUtil","Language","Teralios/QuizCreator/Game"],function(t,e,i,n){"use strict";function s(t){this.init(t)}return s.prototype={init:function(t){this._gameContainer=t,this.quizID=Number(elData(this._gameContainer,"quiz-id")),this._gameFieldContainer=elBySel(".gameField",this._gameContainer),this._gameFieldContainer?(this._gameContainer.style.height=this._gameContainer.offsetHeight+"px",this._gameFieldContainer.innerHTML="",this._gameFieldContainer.classList.remove("dummy")):(this._gameFieldContainer=elCreate("div"),this._gameFieldContainer.className="gameField",this._gameContainer.appendChild(this._gameFieldContainer)),Number.isInteger(this.quizID)||this._printError(i.get("wcf.quizCreator.quiz.id.invalid")),this._loadData()},_loadData:function(){t.apiOnce({data:{actionName:"loadQuiz",className:"wcf\\data\\quiz\\QuizAction",objectIDs:[this.quizID]},success:this.prepareGame.bind(this),failure:function(){this._printError(i.get("wcf.quizCreator.quiz.loading.error"))}.bind(this)})},prepareGame:function(t){this._data=t.returnValues,this._initGame()},_printError:function(t){this._gameFieldContainer.innerHTML='<div class="gameContent"><p class="error">'+e.escapeHTML(t)+"</p></div>"},_initGame:function(){this._game=new n(this._data,this._gameFieldContainer),this._game.buildGame()}},s}),define("Teralios/QuizCreator/Acp/ActionReset",["Ajax","Ui/Confirmation","Language"],function(t,e,i){"use strict";return{init:function(t,e,i){},confirm:function(){},click:function(t){},addEvent:function(t){},_buildClick:function(){},_ajaxSetup:function(){}}}),define("Teralios/QuizCreator/Dialog/Player",["Ajax","Ui/Dialog","Language"],function(t,e,i){"use strict";return{init:function(){},getData:function(t){},getHtml:function(){},showDialog:function(){},_loadTPL:function(){},_buildButton:function(){},_dialogSetup:function(){}}});